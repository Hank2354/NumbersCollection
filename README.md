# Numbers Collection
### Тестовое задание на позицию iOS Developer

## Задача
Необходимо написать простое приложение, которое будет выводить бесконечно прокручиваемую табличку с простыми числами и числами Фибоначчи
При проскроливании необходимо реализовать асинхронную пакетную пагинацию, и дополнять таблицу новыми числами бесконечно.

**Условия**
- язык Swift
- Таблица в две колонки
- Фоны у ячеек должны чередоваться в шахматном порядке
- Прокрутка не должна тормозить
- Память не должна утекать

Переключение таблички чисел с простых на Фибоначчи и наоборот - по своему усмотрению

## Решение

### Этап первый
Создаем проект, проводим стандартную подготовку проекта к разработке. 

Ввиду простоты приложения и отсутствия требований к сложной логике было принято решение использовать архитектуру MVC как самую простую в реализации, а точнее у нас будет один MVC модуль, который будет выполнять всю работу

Логика генерации будет вынесена в отдельный рабочий сервис, который будет через `singleton` предоставлять нам удобный интерфейс для работы с ним. Назовем данные классы `NumGeneratorService` и `NumGeneratorInterface` соответственно

### Этап второй
Прописываем начальные взаимодействия между `controller` и его `contentView`, создаем UI елементы и создаем необходимые методы делегирования, через которые будут проходить взаимодействия. 

Для отображения чисел была выбранна именно CollectionView, потому что она является более гибкой, в отличие от таблицы

Для конфигурации коллекции с ячейками в шахматном порядке используем логику разделения ячеек на четные/нечетные ряды, и сами ячейки на четные/нечетные

Для каждого четного элемента в четном ряду ставим белый цвет, и черный для нечетного, В нечетном ряду - наоборот. Получаем последовательно заполненную колелкцию в 2 вертикальных столбца, как того требуют условия задачи.

### Этап третий
Подключаем пагинацию к нашим таблицам. При отображении контрольной ячейки снизу (задается в параметрам приложения, по умолчанию 12) - коллекция сообщает делегату свой тип, и информацию о том, что ей необходимо получить новые числа для отображения. Мы реагируем не на последнюю ячейку для того, чтоб получить некоторое время на дозагрузку данных, пока пользователь дойдет до конца таблицы, она уже заполниться новыми данными, это создаст эффект бесконечной таблицы, как того требуют условия задачи.

### Этап четвертый
Реализуем алгоритмы подбора чисел. (Подробная логика в классах `NumGeneratorService` и `NumGeneratorInterface`, код детально задокументирован)
И запускаем их в утилите потоке. Данный поток выбран потому что данный поток расчитан чтоб быть энергоэффективным и имеет нужный уровень приоритета. Все задачи запускаются в потоке асинхронно, интерфейс обновляется в главном потоке, тоже асинхронно чтобы не допустить зависаний. При достижении максимально возможных чисел алгоритм возвращаем последнее возможное число каждый раз, когда мы к нему обращаемся

### Этап пятый
Проводим core review, убираем лишний код, упрощаем алгоритмы, если это возможно, пишем краткую документацию. Во всех клоужерах указываем список захвата, чтобы не допустить `memory leak`

## Результат

Все коллекции работают без зависаний, достигнут эффект бесконечной коллекции, пагинации не видно даже при очень высокой скорости прокрутки
Алгоритмы имеют сложность не более чем `O(n)`, удалось избежать квадратичных сложностей, как `(On^2)`.

Обработал возможные падения приложения (например при достижении максимальных чисел), коллекции переключаются анимированно, без зависаний, для переключения коллекций используется стандартный, и рекомендованный компонент от Apple

Код подробно документирован там, где это необходимо, проведен code review

## Демонстрация

Presentation video -> [On YouTube :tv:](https://youtu.be/0MM0HsI6b4M)
